# SliderView
Проект является имплементацией слайдера по программе обучения 
[FSD](https://www.fullstack-development.com/). \
Использованы: \
[TypeScript](https://www.typescriptlang.org/), [JQuery](https://jquery.com/) \
[SCSS](https://sass-lang.com/) - препроцессор CSS, \
[Jest](https://jestjs.io/) - для тестов, \
[Webpack](https://webpack.js.org/) - для сборки. \
Страница с демонстрацией на 
[gh-pages](https://liquense.github.io/FSD-task-4/dist/index)

## Установка
```
git clone https://github.com/Liquense/FSD-task-4
npm install
```
#### Команды
Сборка: `npm run build` \
Сборка с дев-сервером: `npm run dev-server` \
Приложение покрыто тестами: `npm run test` \
Проверка линтером: `npm run eslint`

## Использование
Импортировать ***liquidSlider.ts*** и инициализировать с помощью функции `.liquidSlider()` \
Несколько примеров: 
```typescript
//импорт jquery, ведь мы ею пользуемся
const sliderInitSelector = 'your selector'; // ваш селектор

// Стандартный слайдер
$(sliderInitSelector).liquidSlider();

// Вертикальный слайдер с пользовательскими минимальным и максимальным значениями, шагом. 
$(sliderInitSelector).liquidSlider({
  min: -50,
  max: 20,
  step: 2,
  isVertical: true,
});

// Слайдер с передачей пользовательских данных, 
// двумя стандартными ползунками, отображаемой разметкой
$(sliderInitSelector).liquidSlider({
  items: [
    1,
    { toString(): string { return 'two'; } },
    "<img src='https://img.icons8.com/cotton/2x/like--v1.png' alt='heart'>",
    'last',
  ],
  isRange: true,
  withMarkup: true,
});

// Слайдер с передачей собственных ползунков (количество, положение, с кем связаны)
// и отображением подсказки только на активном ползунке
$(sliderInitSelector).liquidSlider({
  handlers: [
    { rangePair: 'start' },
    { itemIndex: 2, rangePair: 0 },
    { itemIndex: 3, rangePair: 3 },
    { itemIndex: 6 },
  ],
  showTooltips: false,
});
```
### Параметры
- **items:**_presentable[]_ - массив элементов, который будет перебираться слайдером \
    _(экземпляры типа **presentable** должны иметь метод `.toString()`)_ \
    _(если не указан - будет массив чисел от min до max с шагом step)_ \
    _(если указан, перемещение ползунков будет происходить по индексам массива с данными)_
- **values:**_number[]_ - текущие значения стандартных ползунков \
    _(применимо, если не были переданы свои ползунки)_ \
    _(если заданы пользовательские значения, то текущее значение - номер элемента в массиве)_
- **isRange:**_boolean_ - диапазон ли это \
    _(false - один ползунок, true - диапазон из двух ползунков)_ \
    _если определены пользовательские ползунки - они в приоритете_
- **isReversed:**_boolean_ - инвертированы ли диапазоны \
- **isVertical**_:boolean_ - ориентация \
    _(true - вертикальная, false - горизонтальная)_
- **min:**_number_ - минимальное значение слайдера \
    _(если задан пользовательский массив значений, это минимальный индекс)_
- **max:**_number_ - максимальное значение слайдер \
    _(если задан пользовательский массив значений, это максимальный индекс)_
- **step:**_number_ - шаг слайдера \
    _(при использовании массива пользовательских элементов будет относиться к индексам элементов массива)_
- **handlers:**_object[]_ - параметры для массива ползунков \
    _(Индексы ползунков назначаются в том же порядке, в котором они переданы, начиная с 0)_
    - **itemIndex:**_number_ - значение ползунка \
        (индекс при пользовательских значениях)
    - **rangePair:**_number|'start'|'end'_ объект, с которым нужно связать ползунок \
        'start' - с началом слайдера \
        'end' - с концом слайдера \
        <number> - с другим ползунком по его индексу
    - **additionalClasses:**_string_ - пользовательские классы
    - **tooltip:**_object_ - подсказка, которая будет отображаться возле ползунка
        - **additionalClass:**_string[]_ пользовательские классы
### Методы
- **addView(_newView_)** - связывает переданный экземпляр Вида с моделью \
    _(передаваемый Вид должен имплементировать интерфейсы View и Listenable)_
- **addHandler(_itemIndex:number, rangePair:number|'start'|'end'_)** - добавляет новый ползунок
    - _**itemIndex** - значение ползунка (если в слайдер передан массив пользовательских значений - 
    индекс значения)_
    - _**rangePair** - пара для ползунка 
    (start - начало слайдера, end - конец слайдера, 
    <number> - индекс ползунка, с которым нужно связать добавляемый)_
- **removeHandler(_handlerIndex:number_)** - удаляет ползунок
    - _**handlerIndex**_ - индекс ползунка, который нужно удалить
- **setMin(_newMin:number_)** - устанавливает минимальное значение слайдера
    - _**newMin** - новое минимальное значение слайдера 
    (если передан массив пользовательских значений, это индекс нужного значения)_
- **setMax(_newMax:number_)** - устанавливает максимальное значение слайдера
    - _**newMax** - новое максимальное значение слайдера 
    (если передан массив пользовательских значений, это индекс нужного значения)_
- **setStep(_newStep:number_)** - устанавливает шаг слайдера
    - _**newStep** - новый шаг слайдера 
    (если передан массив пользовательских значений, это количество пропускаемых индексов)_
- **setTooltipsVisibility(_newState:boolean_)** - устанавливает видимость подсказок у ползунков \
    _(true - сделать видимыми, false - скрыть)_
- **setMarkupVisibility(_newState:boolean_)** - устанавливает видимость разметки слайдера \
    _(true - сделать видимой, false - скрыть)_
- **setVertical(_newState:boolean_)** - устанавливает ориентацию слайдера \
    _(true - вертикальный, false - горизонтальный)_
## Структура проекта
### Модули
#### liquidSlider.ts
Расширяет JQuery функцией, позволяющей инициализировать слайдеры на JQuery-объектах. \
Функция, в свою очередь, создаёт Контроллер и передаёт ему параметры инициализации слайдера. \
Возвращает экземпляр контроллера.
#### controller.ts
Инициализирует Модель и базовый Вид, осуществляет их координацию 
и передачу данных между ними.
Экземпляр контроллера выступает объектом взаимодействия с пользователем. \
_Отслеживает изменения положения ползунка в **defaultView** (`handlerPositionChanged()`)
и значения в **sliderModel** (`handlerValueChanged()`)
с помощью паттерна наблюдателя._
#### sliderModel.ts
Здесь хранятся данные слайдера и производятся все вычисления, связанные с ними в целом; \
Вызываются инициализации модельной части ползунков и изменения данных в них;
#### handlerModel.ts
Хранит данные о ползунке и производит вычисления его относительного положения и
уведомляет создавшую его **sliderModel** об изменениях посчитанных значений
вызовом `handlerValueChanged()` в ней. \
_Положения ползунков высчитываются в нормализованных относительных величинах (от 0 до 1),
чтобы эти значения были понятны и модели, и виду._
#### defaultView.ts
Стандартный **Вид**, являющийся на данный момент фасадом, передающим вызовы от **Контроллера** в
модуль **sliderView**.
#### sliderView.ts
Хранит информацию о слайдере, относящуюся к визуальному отображению; \
Добавляет обработчики событий; \
Создаёт тело слайдера, инициирует создание внутренних элементов; \
Обновляет визуальное отображение слайдера при изменениях.
#### handlerView.ts
Создаёт элементы, хранит информацию, рассчитывает и обновляет позицию у ползунка.
#### tooltipView.ts
Создаёт элементы, хранит информацию, меняет состояние у подсказки ползунка.
#### rangeView.ts
Хранит элементы, включенные в диапазон, обновляет позицию диапазона.
#### markupView.ts
Создаёт элементы разметки, рассчитывает и обновляет их позиции.
#### common.ts
Содержит общие для проекта функции.
#### interfaces.ts
Содержит имплементируемые интерфейсы.
#### types.ts
Содержит собственные типы, используемые в проекте.
### Диаграмма
[Диаграмма](UML%20Slider.png)
